import{_ as C}from"./dialog.vue_vue_type_script_setup_true_lang-bc621c57.js";import{_ as z}from"./base-button.vue_vue_type_script_setup_true_lang-0402fa38.js";import{_ as B}from"./alert.vue_vue_type_script_setup_true_lang-48655d17.js";import{_ as T}from"./icon-publish-202f6b67.js";import{o as a,h as c,f as t,d as E,a5 as j,r as b,b as l,w as r,c as h,a as _,e as m,u as s,E as O,F as L,H as N,O as A,a6 as V,Z as S}from"./app-cf1999b8.js";import"./transition-af2851ad.js";import"./dialog-d6936456.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ExclamationCircleIcon-e5195023.js";import"./XCircleIcon-b485a63c.js";function v(w,g){return a(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"}),t("path",{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"})])}const D={key:0,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},I={class:"flex w-full items-start gap-4"},M={class:"flex size-16 shrink-0"},R=t("div",{class:"flex-1"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-600"}," Publish Translations "),t("p",{class:"mt-1 text-sm text-gray-500"}," Be cautious when publishing, as this action will update your project with all translations and changes made in the database, overwriting project files. ")],-1),Z={class:"w-full text-center"},$=t("strong",null,"Warning:",-1),F=t("span",null,"Download",-1),H=["href"],U=t("span",null,"Download 2",-1),W={key:1,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},q=t("div",{class:"mx-auto flex size-12 shrink-0 items-center justify-center"},[t("span",{role:"img",class:"text-4xl"},"ðŸ¤”")],-1),G=t("div",{class:"w-full text-center"},[t("h3",{class:"text-xl font-semibold leading-6 text-gray-600"}," What are you trying to do? "),t("p",{class:"mt-4 text-sm text-gray-500"}," Add languages to your project, then come back to publish translations when you're ready. ")],-1),J=[q,G],lt=E({__name:"publish-translations",props:{canPublish:{type:Boolean},isProductionEnv:{type:Boolean}},setup(w){const g=j(),{close:d}=N(),i=b(!1),n=b(!1),x=()=>{console.log("Publishing translations..."),i.value=!0,A.post(route("ltu.translation.export"),{},{preserveScroll:!0,onSuccess:()=>{i.value=!1,d(),console.log("Translations success!")}}),console.log("Translations finish!")},y=()=>{n.value=!0,fetch(route("ltu.translation.download")).then(async e=>{let f=await e.blob();n.value=!1;const o=document.createElement("a"),u=window.URL.createObjectURL(f);o.download="lang.zip",o.href=u,document.body.appendChild(o),o.click(),document.body.removeChild(o),n.value=!1,d()}).catch(e=>{g.error("Something went wrong, please try again.",{icon:!0,position:V.BOTTOM_CENTER})})};return(e,f)=>{const o=S,u=T,k=B,p=z,P=C;return a(),c(L,null,[l(o,{title:"Add Languages"}),l(P,{size:"lg"},{default:r(()=>[e.canPublish?(a(),c("div",D,[t("div",I,[t("div",M,[l(u,{class:"size-16 text-blue-300"})]),R]),t("div",Z,[e.isProductionEnv?m("",!0):(a(),h(k,{key:0,variant:"warning",class:"text-left"},{default:r(()=>[$,_(" This is a Production Environment. Publishing translations will causing issues with version control and other developers, Please use the download button below instead. ")]),_:1})),e.isProductionEnv?m("",!0):(a(),h(p,{key:1,disabled:s(i)||s(n),"is-loading":s(n),variant:"dark",size:"lg",class:"mt-4","full-width":"",target:"_blank",onClick:y},{default:r(()=>[l(s(v),{class:"size-4"}),F]),_:1},8,["disabled","is-loading"])),t("a",{href:e.route("ltu.translation.download"),target:"_blank",size:"lg",class:"mt-4"},[l(s(v),{class:"size-4"}),U],8,H)])])):(a(),c("div",W,J)),t("div",{class:O(["grid grid-cols-1 gap-6 border-t px-6 py-4",{"md:grid-cols-2":e.canPublish}])},[l(p,{variant:"secondary",type:"button",size:"lg",tabindex:"1",onClick:s(d)},{default:r(()=>[_(" Close ")]),_:1},8,["onClick"]),e.canPublish?(a(),h(p,{key:0,variant:"primary",type:"button",size:"lg",disabled:s(i)||s(n),"is-loading":s(i),onClick:x},{default:r(()=>[_(" Publish ")]),_:1},8,["disabled","is-loading"])):m("",!0)],2)]),_:1})],64)}}});export{lt as default};
